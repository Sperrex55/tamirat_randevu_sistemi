{% extends "base_technician.html" %}

{% block title %}Åžifre DeÄŸiÅŸtir{% endblock %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="position-fixed top-0 end-0 p-3" style="z-index: 1055;">
      {% for category, message in messages %}
        <div class="toast align-items-center text-bg-{{ category }} border-0 show mb-2">
          <div class="d-flex">
            <div class="toast-body">{{ message }}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
          </div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

<div class="container mt-5" style="max-width: 500px;">
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-body p-4">

      <h3 class="mb-4 text-center">
        ðŸ”’ Åžifre DeÄŸiÅŸtir
      </h3>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
              {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Kapat"></button>
            </div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <form method="POST" action="{{ url_for('technician_password_update') }}" novalidate>
        <div class="mb-3">
          <label for="current_password" class="form-label">Mevcut Åžifre</label>
          <input type="password" class="form-control rounded-3" id="current_password" name="current_password" placeholder="Mevcut ÅŸifrenizi giriniz" required>
        </div>

        <div class="mb-3">
          <label for="new_password" class="form-label">Yeni Åžifre</label>
          <input type="password" class="form-control rounded-3" id="new_password" name="new_password" placeholder="Yeni ÅŸifrenizi giriniz" required>
        </div>

        <div class="mb-3">
          <label for="confirm_password" class="form-label">Yeni Åžifre (Tekrar)</label>
          <input type="password" class="form-control rounded-3" id="confirm_password" name="confirm_password" placeholder="Yeni ÅŸifreyi tekrar giriniz" required>
        </div>

        <button type="submit" class="btn btn-primary w-100 rounded-3">
          <i class="bi bi-key"></i> Åžifreyi GÃ¼ncelle
        </button>
      </form>

    </div>
  </div>
</div>

{% endblock %}
